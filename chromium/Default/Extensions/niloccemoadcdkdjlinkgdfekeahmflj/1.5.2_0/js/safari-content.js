(function(){if(window.top!=window)return;if(!window.safari)return;safari.self.addEventListener("message",function(msg){var name=msg.name,message=msg.message;if(name==="executeScript")eval(message);else if(name==="__performCb"){var cbId=message.cbId,data=message.data;Callbacker.performCbFromIdWithData(data,cbId)}else name==="isSafariContentAvailable"&&safari.self.tab.dispatchMessage("safariContentAvailable",message)}),document.addEventListener("contextmenu",function(t){safari.self.tab.setContextMenuEventUserInfo(t,t.target.href)},!1);var Callbacker=window.Callbacker={addCb:function(e){this._cbsToIds||(this._cbsToIds={}),this._cbCounter||(this._cbCounter=0);var t=++this._cbCounter;return this._cbsToIds[t]=e,t},performCbFromIdWithData:function(e,t){if(!this._cbsToIds)return;var n=this._cbsToIds[t];if(!n)return;this._cbsToIds[t]=undefined,n(e)}}})();