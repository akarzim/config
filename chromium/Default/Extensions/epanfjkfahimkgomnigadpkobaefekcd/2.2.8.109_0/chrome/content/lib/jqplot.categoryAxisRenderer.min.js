(function(k){k.jqplot.CategoryAxisRenderer=function(){k.jqplot.LinearAxisRenderer.call(this);this.sortMergedLabels=!1};k.jqplot.CategoryAxisRenderer.prototype=new k.jqplot.LinearAxisRenderer;k.jqplot.CategoryAxisRenderer.prototype.constructor=k.jqplot.CategoryAxisRenderer;k.jqplot.CategoryAxisRenderer.prototype.init=function(d){this.groups=1;this.groupLabels=[];this._groupLabels=[];this._grouped=!1;this._barsPerGroup=null;this.reverse=!1;k.extend(!0,this,{tickOptions:{formatString:"%d"}},d);for(var d=
this._dataBounds,b=0;b<this._series.length;b++){var a=this._series[b];if(a.groups)this.groups=a.groups;for(var a=a.data,g=0;g<a.length;g++)if(this.name=="xaxis"||this.name=="x2axis"){if(a[g][0]<d.min||d.min==null)d.min=a[g][0];if(a[g][0]>d.max||d.max==null)d.max=a[g][0]}else{if(a[g][1]<d.min||d.min==null)d.min=a[g][1];if(a[g][1]>d.max||d.max==null)d.max=a[g][1]}}if(this.groupLabels.length)this.groups=this.groupLabels.length};k.jqplot.CategoryAxisRenderer.prototype.createTicks=function(){var d=this.ticks,
b=this.name,a,g;if(d.length){if(this.groups>1&&!this._grouped){for(var e=d.length,f=parseInt(e/this.groups,10),h=0,b=f;b<e;b+=f)d.splice(b+h,0," "),h++;this._grouped=!0}this.min=0.5;this.max=d.length+0.5;e=this.max-this.min;this.numberTicks=2*d.length+1;for(b=0;b<d.length;b++)g=this.min+2*b*e/(this.numberTicks-1),a=new this.tickRenderer(this.tickOptions),a.showLabel=!1,a.setTick(g,this.name),this._ticks.push(a),a=new this.tickRenderer(this.tickOptions),a.label=d[b],a.showMark=!1,a.showGridline=!1,
a.setTick(g+0.5,this.name),this._ticks.push(a);a=new this.tickRenderer(this.tickOptions);a.showLabel=!1;a.setTick(g+1,this.name);this._ticks.push(a)}else{a=b=="xaxis"||b=="x2axis"?this._plotDimensions.width:this._plotDimensions.height;if(this.min!=null&&this.max!=null&&this.numberTicks!=null)this.tickInterval=null;if(this.min!=null&&this.max!=null&&this.tickInterval!=null&&parseInt((this.max-this.min)/this.tickInterval,10)!=(this.max-this.min)/this.tickInterval)this.tickInterval=null;d=[];g=0;for(var m=
!1,b=0;b<this._series.length;b++){f=this._series[b];for(e=0;e<f.data.length;e++)h=this.name=="xaxis"||this.name=="x2axis"?f.data[e][0]:f.data[e][1],k.inArray(h,d)==-1&&(m=!0,g+=1,d.push(h))}m&&this.sortMergedLabels&&d.sort(function(a,b){return a-b});this.ticks=d;for(b=0;b<this._series.length;b++){f=this._series[b];for(e=0;e<f.data.length;e++)h=this.name=="xaxis"||this.name=="x2axis"?f.data[e][0]:f.data[e][1],h=k.inArray(h,d)+1,this.name=="xaxis"||this.name=="x2axis"?f.data[e][0]=h:f.data[e][1]=h}if(this.groups>
1&&!this._grouped){e=d.length;f=parseInt(e/this.groups,10);h=0;for(b=f;b<e;b+=f+1)d[b]=" ";this._grouped=!0}b=g+0.5;if(this.numberTicks==null)this.numberTicks=2*g+1;e=b-0.5;this.min=0.5;this.max=b;h=0;b=parseInt(3+a/10,10);f=parseInt(g/b,10);if(this.tickInterval==null)this.tickInterval=e/(this.numberTicks-1);for(b=0;b<this.numberTicks;b++)g=this.min+b*this.tickInterval,a=new this.tickRenderer(this.tickOptions),b/2==parseInt(b/2,10)?(a.showLabel=!1,a.showMark=!0):(f>0&&h<f?(a.showLabel=!1,h+=1):(a.showLabel=
!0,h=0),a.label=a.formatter(a.formatString,d[(b-1)/2]),a.showMark=!1,a.showGridline=!1),a.setTick(g,this.name),this._ticks.push(a)}};k.jqplot.CategoryAxisRenderer.prototype.draw=function(d,b){if(this.show){this.renderer.createTicks.call(this);this._elem&&this._elem.emptyForce();this._elem=this._elem||k('<div class="jqplot-axis jqplot-'+this.name+'" style="position:absolute;"></div>');this.name=="xaxis"||this.name=="x2axis"?this._elem.width(this._plotDimensions.width):this._elem.height(this._plotDimensions.height);
this.labelOptions.axis=this.name;this._label=new this.labelRenderer(this.labelOptions);if(this._label.show){var a=this._label.draw(d,b);a.appendTo(this._elem)}for(var g=this._ticks,e=0;e<g.length;e++)if(a=g[e],a.showLabel&&(!a.isMinorTick||this.showMinorTicks))a=a.draw(d,b),a.appendTo(this._elem);this._groupLabels=[];for(e=0;e<this.groupLabels.length;e++)a=k('<div style="position:absolute;" class="jqplot-'+this.name+'-groupLabel"></div>'),a.html(this.groupLabels[e]),this._groupLabels.push(a),a.appendTo(this._elem)}return this._elem};
k.jqplot.CategoryAxisRenderer.prototype.set=function(){var d=0,b,a=0,g=0,e=this._label==null?!1:this._label.show;if(this.show){for(var f=this._ticks,h=0;h<f.length;h++)if(b=f[h],b.showLabel&&(!b.isMinorTick||this.showMinorTicks))b=this.name=="xaxis"||this.name=="x2axis"?b._elem.outerHeight(!0):b._elem.outerWidth(!0),b>d&&(d=b);for(h=f=0;h<this._groupLabels.length;h++)b=this._groupLabels[h],b=this.name=="xaxis"||this.name=="x2axis"?b.outerHeight(!0):b.outerWidth(!0),b>f&&(f=b);e&&(a=this._label._elem.outerWidth(!0),
g=this._label._elem.outerHeight(!0));this.name=="xaxis"?(d+=f+g,this._elem.css({height:d+"px",left:"0px",bottom:"0px"})):this.name=="x2axis"?(d+=f+g,this._elem.css({height:d+"px",left:"0px",top:"0px"})):(this.name=="yaxis"?(d+=f+a,this._elem.css({width:d+"px",left:"0px",top:"0px"})):(d+=f+a,this._elem.css({width:d+"px",right:"0px",top:"0px"})),e&&this._label.constructor==k.jqplot.AxisLabelRenderer&&this._label._elem.css("width",a+"px"))}};k.jqplot.CategoryAxisRenderer.prototype.pack=function(d,b){var a=
this._ticks,g=this.max,e=this.min,f=b.max,h=b.min,m=this._label==null?!1:this._label.show,i,j;for(j in d)this._elem.css(j,d[j]);this._offsets=b;var l=f-h,n=g-e;this.reverse?(this.u2p=function(a){return h+(g-a)*l/n},this.p2u=function(a){return e+(a-h)*n/l},this.name=="xaxis"||this.name=="x2axis"?(this.series_u2p=function(a){return(g-a)*l/n},this.series_p2u=function(a){return a*n/l+g}):(this.series_u2p=function(a){return(e-a)*l/n},this.series_p2u=function(a){return a*n/l+e})):(this.u2p=function(a){return(a-
e)*l/n+h},this.p2u=function(a){return(a-h)*n/l+e},this.name=="xaxis"||this.name=="x2axis"?(this.series_u2p=function(a){return(a-e)*l/n},this.series_p2u=function(a){return a*n/l+e}):(this.series_u2p=function(a){return(a-g)*l/n},this.series_p2u=function(a){return a*n/l+g}));if(this.show)if(this.name=="xaxis"||this.name=="x2axis"){for(i=0;i<a.length;i++){var c=a[i];if(c.show&&c.showLabel){if(c.constructor==k.jqplot.CanvasAxisTickRenderer&&c.angle)switch(j=this.name=="xaxis"?1:-1,c.labelPosition){case "auto":j=
j*c.angle<0?-c.getWidth()+c._textRenderer.height*Math.sin(-c._textRenderer.angle)/2:-c._textRenderer.height*Math.sin(c._textRenderer.angle)/2;break;case "end":j=-c.getWidth()+c._textRenderer.height*Math.sin(-c._textRenderer.angle)/2;break;case "start":j=-c._textRenderer.height*Math.sin(c._textRenderer.angle)/2;break;case "middle":j=-c.getWidth()/2+c._textRenderer.height*Math.sin(-c._textRenderer.angle)/2;break;default:j=-c.getWidth()/2+c._textRenderer.height*Math.sin(-c._textRenderer.angle)/2}else j=
-c.getWidth()/2;j=this.u2p(c.value)+j+"px";c._elem.css("left",j);c.pack()}}a=["bottom",0];m&&(i=this._label._elem.outerWidth(!0),this._label._elem.css("left",h+l/2-i/2+"px"),this.name=="xaxis"?(this._label._elem.css("bottom","0px"),a=["bottom",this._label._elem.outerHeight(!0)]):(this._label._elem.css("top","0px"),a=["top",this._label._elem.outerHeight(!0)]),this._label.pack());f=parseInt(this._ticks.length/this.groups,10);for(i=0;i<this._groupLabels.length;i++){for(var p=m=0,o=i*f;o<=(i+1)*f;o++)if(this._ticks[o]._elem&&
this._ticks[o].label!=" ")c=this._ticks[o]._elem,j=c.position(),m+=j.left+c.outerWidth(!0)/2,p++;m/=p;this._groupLabels[i].css({left:m-this._groupLabels[i].outerWidth(!0)/2});this._groupLabels[i].css(a[0],a[1])}}else{for(i=0;i<a.length;i++)if(c=a[i],c.show&&c.showLabel){if(c.constructor==k.jqplot.CanvasAxisTickRenderer&&c.angle)switch(j=this.name=="yaxis"?1:-1,c.labelPosition){case "auto":case "end":j=j*c.angle<0?-c._textRenderer.height*Math.cos(-c._textRenderer.angle)/2:-c.getHeight()+c._textRenderer.height*
Math.cos(c._textRenderer.angle)/2;break;case "start":j=c.angle>0?-c._textRenderer.height*Math.cos(-c._textRenderer.angle)/2:-c.getHeight()+c._textRenderer.height*Math.cos(c._textRenderer.angle)/2;break;case "middle":j=-c.getHeight()/2;break;default:j=-c.getHeight()/2}else j=-c.getHeight()/2;j=this.u2p(c.value)+j+"px";c._elem.css("top",j);c.pack()}a=["left",0];m&&(i=this._label._elem.outerHeight(!0),this._label._elem.css("top",f-l/2-i/2+"px"),this.name=="yaxis"?(this._label._elem.css("left","0px"),
a=["left",this._label._elem.outerWidth(!0)]):(this._label._elem.css("right","0px"),a=["right",this._label._elem.outerWidth(!0)]),this._label.pack());f=parseInt(this._ticks.length/this.groups,10);for(i=0;i<this._groupLabels.length;i++){p=m=0;for(o=i*f;o<=(i+1)*f;o++)if(this._ticks[o]._elem&&this._ticks[o].label!=" ")c=this._ticks[o]._elem,j=c.position(),m+=j.top+c.outerHeight()/2,p++;m/=p;this._groupLabels[i].css({top:m-this._groupLabels[i].outerHeight()/2});this._groupLabels[i].css(a[0],a[1])}}}})(jQuery);