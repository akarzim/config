(function(f){function n(a,b,d){a.plugins.bubbleRenderer.highlightLabelCanvas.empty();var c=a.series[b],e=a.plugins.bubbleRenderer.highlightCanvas._ctx;e.clearRect(0,0,e.canvas.width,e.canvas.height);c._highlightedPoint=d;a.plugins.bubbleRenderer.highlightedSeriesIndex=b;var b=c.highlightColorGenerator.get(d),f=c.gridData[d][0],i=c.gridData[d][1],g=c.gridData[d][2];e.save();e.fillStyle=b;e.strokeStyle=b;e.lineWidth=1;e.beginPath();e.arc(f,i,g,0,2*Math.PI,0);e.closePath();e.fill();e.restore();if(c.labels[d])a.plugins.bubbleRenderer.highlightLabel=
c.labels[d].clone(),a.plugins.bubbleRenderer.highlightLabel.appendTo(a.plugins.bubbleRenderer.highlightLabelCanvas),a.plugins.bubbleRenderer.highlightLabel.addClass("jqplot-bubble-label-highlight")}function m(a){var b=a.plugins.bubbleRenderer.highlightCanvas;a.plugins.bubbleRenderer.highlightLabelCanvas.empty();b._ctx.clearRect(0,0,b._ctx.canvas.width,b._ctx.canvas.height);for(b=0;b<a.series.length;b++)a.series[b]._highlightedPoint=null;a.plugins.bubbleRenderer.highlightedSeriesIndex=null;a.target.trigger("jqplotDataUnhighlight")}
function o(a,b,d,c,e){if(c){if(b=c.seriesIndex,d=c.pointIndex,c=[b,d,c.data,e.series[b].gridData[d][2]],b=jQuery.Event("jqplotDataMouseOver"),b.pageX=a.pageX,b.pageY=a.pageY,e.target.trigger(b,c),e.series[c[0]].highlightMouseOver&&!(c[0]==e.plugins.bubbleRenderer.highlightedSeriesIndex&&c[1]==e.series[c[0]]._highlightedPoint))b=jQuery.Event("jqplotDataHighlight"),b.which=a.which,b.pageX=a.pageX,b.pageY=a.pageY,e.target.trigger(b,c),n(e,c[0],c[1])}else c==null&&m(e)}function p(a,b,d,c,e){if(c){if(b=
c.seriesIndex,d=c.pointIndex,c=[b,d,c.data,e.series[b].gridData[d][2]],e.series[c[0]].highlightMouseDown&&!(c[0]==e.plugins.bubbleRenderer.highlightedSeriesIndex&&c[1]==e.series[c[0]]._highlightedPoint))b=jQuery.Event("jqplotDataHighlight"),b.which=a.which,b.pageX=a.pageX,b.pageY=a.pageY,e.target.trigger(b,c),n(e,c[0],c[1])}else c==null&&m(e)}function q(a,b,d,c,e){a=e.plugins.bubbleRenderer.highlightedSeriesIndex;a!=null&&e.series[a].highlightMouseDown&&m(e)}function r(a,b,d,c,e){if(c)b=c.seriesIndex,
d=c.pointIndex,c=[b,d,c.data,e.series[b].gridData[d][2]],b=jQuery.Event("jqplotDataClick"),b.which=a.which,b.pageX=a.pageX,b.pageY=a.pageY,e.target.trigger(b,c)}function s(a,b,d,c,e){if(c)b=c.seriesIndex,d=c.pointIndex,c=[b,d,c.data,e.series[b].gridData[d][2]],b=e.plugins.bubbleRenderer.highlightedSeriesIndex,b!=null&&e.series[b].highlightMouseDown&&m(e),b=jQuery.Event("jqplotDataRightClick"),b.which=a.which,b.pageX=a.pageX,b.pageY=a.pageY,e.target.trigger(b,c)}function t(){if(this.plugins.bubbleRenderer&&
this.plugins.bubbleRenderer.highlightCanvas)this.plugins.bubbleRenderer.highlightCanvas.resetCanvas(),this.plugins.bubbleRenderer.highlightCanvas=null;this.plugins.bubbleRenderer={highlightedSeriesIndex:null};this.plugins.bubbleRenderer.highlightCanvas=new f.jqplot.GenericCanvas;this.plugins.bubbleRenderer.highlightLabel=null;this.plugins.bubbleRenderer.highlightLabelCanvas=f('<div style="position:absolute;"></div>');this.plugins.bubbleRenderer.highlightLabelCanvas.css({top:this._gridPadding.top,
left:this._gridPadding.left,width:this._plotDimensions.width-this._gridPadding.left-this._gridPadding.right+"px",height:this._plotDimensions.height-this._gridPadding.top-this._gridPadding.bottom+"px"});this.eventCanvas._elem.before(this.plugins.bubbleRenderer.highlightCanvas.createElement(this._gridPadding,"jqplot-bubbleRenderer-highlight-canvas",this._plotDimensions,this));this.eventCanvas._elem.before(this.plugins.bubbleRenderer.highlightLabelCanvas);this.plugins.bubbleRenderer.highlightCanvas.setContext()}
f.jqplot.BubbleRenderer=function(){f.jqplot.LineRenderer.call(this)};f.jqplot.BubbleRenderer.prototype=new f.jqplot.LineRenderer;f.jqplot.BubbleRenderer.prototype.constructor=f.jqplot.BubbleRenderer;f.jqplot.BubbleRenderer.prototype.init=function(a,b){this.autoscaleBubbles=this.varyBubbleColors=!0;this.autoscaleMultiplier=1;this.autoscalePointsFactor=-0.07;this.highlightMouseOver=this.escapeHtml=!0;this.highlightMouseDown=!1;this.highlightColors=[];this.bubbleAlpha=1;this.highlightAlpha=null;this.bubbleGradients=
!1;this.showLabels=!0;this.radii=[];this.maxRadius=0;this._highlightedPoint=null;this.labels=[];this.bubbleCanvases=[];this._type="bubble";if(a.highlightMouseDown&&a.highlightMouseOver==null)a.highlightMouseOver=!1;f.extend(!0,this,a);if(this.highlightAlpha==null&&(this.highlightAlpha=this.bubbleAlpha,this.bubbleGradients))this.highlightAlpha=0.35;this.autoscaleMultiplier*=Math.pow(this.data.length,this.autoscalePointsFactor);this._highlightedPoint=null;for(var d,c=0;c<this.data.length;c++){d=null;
var e=this.data[c];this.maxRadius=Math.max(this.maxRadius,e[2]);e[3]&&typeof e[3]=="object"&&(d=e[3].color);d==null&&this.seriesColors[c]!=null&&(d=this.seriesColors[c]);d&&this.bubbleAlpha<1&&(d=f.jqplot.getColorComponents(d),d="rgba("+d[0]+", "+d[1]+", "+d[2]+", "+this.bubbleAlpha+")");d&&(this.seriesColors[c]=d)}if(!this.varyBubbleColors)this.seriesColors=[this.color];this.colorGenerator=new f.jqplot.ColorGenerator(this.seriesColors);if(this.highlightColors.length==0)for(c=0;c<this.seriesColors.length;c++){d=
f.jqplot.getColorComponents(this.seriesColors[c]);d=[d[0],d[1],d[2]];for(var e=d[0]+d[1]+d[2],h=0;h<3;h++)d[h]=e>570?d[h]*0.8:d[h]+0.3*(255-d[h]),d[h]=parseInt(d[h],10);this.highlightColors.push("rgba("+d[0]+","+d[1]+","+d[2]+", "+this.highlightAlpha+")")}this.highlightColorGenerator=new f.jqplot.ColorGenerator(this.highlightColors);this.renderer.shadowRenderer.init({fill:!0,isarc:!0,angle:this.shadowAngle,alpha:this.shadowAlpha,closePath:!0});this.canvas=new f.jqplot.DivCanvas;this.canvas._plotDimensions=
this._plotDimensions;b.eventListenerHooks.addOnce("jqplotMouseMove",o);b.eventListenerHooks.addOnce("jqplotMouseDown",p);b.eventListenerHooks.addOnce("jqplotMouseUp",q);b.eventListenerHooks.addOnce("jqplotClick",r);b.eventListenerHooks.addOnce("jqplotRightClick",s);b.postDrawHooks.addOnce(t)};f.jqplot.BubbleRenderer.prototype.setGridData=function(a){var b=this._xaxis.series_u2p,d=this._yaxis.series_u2p,c=this._plotData;this.gridData=[];var e=[];this.radii=[];for(var a=Math.min(a._height,a._width),
f=0;f<this.data.length;f++)c[f]!=null&&(this.gridData.push([b.call(this._xaxis,c[f][0]),d.call(this._yaxis,c[f][1]),c[f][2]]),this.radii.push([f,c[f][2]]),e.push(c[f][2]));var c=this.maxRadius=Math.max.apply(Math,e),i=this.gridData.length;if(this.autoscaleBubbles)for(f=0;f<i;f++)d=e[f]/c,b=this.autoscaleMultiplier*a/6,this.gridData[f][2]=b*d;this.radii.sort(function(a,b){return b[1]-a[1]})};f.jqplot.BubbleRenderer.prototype.makeGridData=function(a,b){var d=this._xaxis.series_u2p,c=this._yaxis.series_u2p,
e=[],f=[];this.radii=[];for(var i=Math.min(b._height,b._width),g=0;g<a.length;g++)a[g]!=null&&(e.push([d.call(this._xaxis,a[g][0]),c.call(this._yaxis,a[g][1]),a[g][2]]),f.push(a[g][2]),this.radii.push([g,a[g][2]]));var k=this.maxRadius=Math.max.apply(Math,f),j=this.gridData.length;if(this.autoscaleBubbles)for(g=0;g<j;g++)c=f[g]/k,d=this.autoscaleMultiplier*i/6,e[g][2]=d*c;this.radii.sort(function(a,b){return b[1]-a[1]});return e};f.jqplot.BubbleRenderer.prototype.draw=function(a,b){if(this.plugins.pointLabels)this.plugins.pointLabels.show=
!1;this.canvas._elem.empty();for(var d=0;d<this.radii.length;d++){var c=this.radii[d][0],e=null,h=null,h=null,h=this.data[c],b=this.gridData[c];h[3]&&(typeof h[3]=="object"?e=h[3].label:typeof h[3]=="string"&&(e=h[3]));var h=this.colorGenerator.get(c),i=b[2],g,k;this.shadow&&(g=(0.7+b[2]/40).toFixed(1),k=1+Math.ceil(b[2]/15),i+=g*k);this.bubbleCanvases[c]=new f.jqplot.BubbleCanvas;this.canvas._elem.append(this.bubbleCanvases[c].createElement(b[0],b[1],i));this.bubbleCanvases[c].setContext();var a=
this.bubbleCanvases[c]._ctx,i=a.canvas.width/2,j=a.canvas.height/2;this.shadow&&this.renderer.shadowRenderer.draw(a,[i,j,b[2],0,2*Math.PI],{offset:g,depth:k});this.bubbleCanvases[c].draw(b[2],h,this.bubbleGradients,this.shadowAngle/180*Math.PI);e&&this.showLabels&&(h=f('<div style="position:absolute;" class="jqplot-bubble-label"></div>'),this.escapeHtml?h.text(e):h.html(e),this.canvas._elem.append(h),e=f(h).outerHeight(),i=f(h).outerWidth(),h.css({top:b[1]-0.5*e,left:b[0]-0.5*i}),this.labels[c]=f(h))}};
f.jqplot.DivCanvas=function(){f.jqplot.ElemContainer.call(this)};f.jqplot.DivCanvas.prototype=new f.jqplot.ElemContainer;f.jqplot.DivCanvas.prototype.constructor=f.jqplot.DivCanvas;f.jqplot.DivCanvas.prototype.createElement=function(a,b,d){this._offsets=a;a="jqplot-DivCanvas";b!=void 0&&(a=b);b=this._elem?this._elem.get(0):document.createElement("div");if(d!=void 0)this._plotDimensions=d;var d=this._plotDimensions.width-this._offsets.left-this._offsets.right+"px",c=this._plotDimensions.height-this._offsets.top-
this._offsets.bottom+"px";this._elem=f(b);this._elem.css({position:"absolute",width:d,height:c,left:this._offsets.left,top:this._offsets.top});this._elem.addClass(a);return this._elem};f.jqplot.DivCanvas.prototype.setContext=function(){return this._ctx={canvas:{width:0,height:0},clearRect:function(){return null}}};f.jqplot.BubbleCanvas=function(){f.jqplot.ElemContainer.call(this)};f.jqplot.BubbleCanvas.prototype=new f.jqplot.ElemContainer;f.jqplot.BubbleCanvas.prototype.constructor=f.jqplot.BubbleCanvas;
f.jqplot.BubbleCanvas.prototype.createElement=function(a,b,d){var c;c=this._elem?this._elem.get(0):document.createElement("canvas");c.width=d!=null?2*d:c.width;c.height=d!=null?2*d:c.height;this._elem=f(c);a=a!=null&&d!=null?a-d:this._elem.css("left");b=b!=null&&d!=null?b-d:this._elem.css("top");this._elem.css({position:"absolute",left:a,top:b});this._elem.addClass("jqplot-bubble-point");f.jqplot.use_excanvas&&(window.G_vmlCanvasManager.init_(document),window.G_vmlCanvasManager.initElement(c));return this._elem};
f.jqplot.BubbleCanvas.prototype.draw=function(a,b,d,c){var e=this._ctx,h=e.canvas.width/2,i=e.canvas.height/2;e.save();if(d&&!f.jqplot.use_excanvas){a*=1.04;var g=f.jqplot.getColorComponents(b),d="rgba("+Math.round(g[0]+0.8*(255-g[0]))+", "+Math.round(g[1]+0.8*(255-g[1]))+", "+Math.round(g[2]+0.8*(255-g[2]))+", "+g[3]+")",g="rgba("+g[0]+", "+g[1]+", "+g[2]+", 0)",k=0.35*a,j=h-Math.cos(c)*0.33*a,c=i-Math.sin(c)*0.33*a,a=e.createRadialGradient(j,c,k,h,i,a);a.addColorStop(0,d);a.addColorStop(0.93,b);
a.addColorStop(0.96,g);a.addColorStop(1,g);e.fillStyle=a;e.fillRect(0,0,e.canvas.width,e.canvas.height)}else e.fillStyle=b,e.strokeStyle=b,e.lineWidth=1,e.beginPath(),e.arc(h,i,a,0,2*Math.PI,0),e.closePath(),e.fill();e.restore()};f.jqplot.BubbleCanvas.prototype.setContext=function(){return this._ctx=this._elem.get(0).getContext("2d")};f.jqplot.BubbleAxisRenderer=function(){f.jqplot.LinearAxisRenderer.call(this)};f.jqplot.BubbleAxisRenderer.prototype=new f.jqplot.LinearAxisRenderer;f.jqplot.BubbleAxisRenderer.prototype.constructor=
f.jqplot.BubbleAxisRenderer;f.jqplot.BubbleAxisRenderer.prototype.init=function(a){f.extend(!0,this,a);for(var a=this._dataBounds,b=0,d=0,c=0,e=0,h=0,i=0,g=0;g<this._series.length;g++)for(var k=this._series[g],j=k._plotData,l=0;l<j.length;l++)if(this.name=="xaxis"||this.name=="x2axis"){if(j[l][0]<a.min||a.min==null)a.min=j[l][0],d=j[l][2],c=k.maxRadius,i=k.autoscaleMultiplier;if(j[l][0]>a.max||a.max==null)a.max=j[l][0],b=j[l][2],e=k.maxRadius,h=k.autoscaleMultiplier}else{if(j[l][1]<a.min||a.min==
null)a.min=j[l][1],d=j[l][2],c=k.maxRadius,i=k.autoscaleMultiplier;if(j[l][1]>a.max||a.max==null)a.max=j[l][1],b=j[l][2],e=k.maxRadius,h=k.autoscaleMultiplier}d/=c;b/=e;e=a.max-a.min;Math.min(this._plotDimensions.width,this._plotDimensions.height);a.max+=b*h/3*e;a.min-=d*i/3*e};f.jqplot.preInitHooks.push(function(a,b,d){d=d||{};d.axesDefaults=d.axesDefaults||{};d.seriesDefaults=d.seriesDefaults||{};a=!1;if(d.seriesDefaults.renderer==f.jqplot.BubbleRenderer)a=!0;else if(d.series)for(b=0;b<d.series.length;b++)d.series[b].renderer==
f.jqplot.BubbleRenderer&&(a=!0);if(a)d.axesDefaults.renderer=f.jqplot.BubbleAxisRenderer,d.sortData=!1})})(jQuery);