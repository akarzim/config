var TRUE_BLOCK=!0,rulesLoaded=!1,bridge={browser_name:"chrome",getMatchingRule:function(a,c,b,d,e){if(rulesLoaded==!1)return replayEvents.push(a),!1;if(a=getMatchingRuleByNodeName(b,c,e)){if(a.allowDomain){if(!a.allowDomain.source)a.allowDomain=RegExp(a.allowDomain,"i");if(d.match(a.allowDomain))a.allowedByTopDomain=!0,a.isBlocked=!1}a.isBlocked=trackerIsBlocked(trackerMap,d,a.name,a.allowedByTopDomain)}return a},showSettings:function(){var a=document.getElementById("chromeAddon");if(a)a.style.display=
""},loadRules:function(){bridge.extension.sendRequest({message:"loadRules",host:window.location.host,topWindow:window.top==window},function(a){topDomain=a.topDomain;bridge.extension.sendRequest({message:"computeBadgeAndNotifications"},function(){});if(a.domainMap){TRUE_BLOCK=!1;DNTP.origin=ORIGIN=a.origin;DNTP.version=VERSION=a.version;domainMap=a.domainMap;trackerMap=a.trackerMap;disabledHere=a.disabledHere;rulesLoaded=!0;for(a=0;a<replayEvents.length;a++)replayEvents[a].replaying=!0,shouldLoad(replayEvents[a]);
replayEvents=[]}else if(TRUE_BLOCK=!0,a.urlsBlocked)urlAlreadyBlocked=a.urlsBlocked,setTimeout(hideBlockedNodes,500)})},updateTabData:function(){},extension:{sendRequest:function(a,c){chrome.extension.sendRequest(a,c)}},initMessageHandler:function(){chrome.extension.onRequest.addListener(handleMessage)}},allowTracker=function(a,c,b){trackerMap[b]||(trackerMap[b]={});a=!(c in trackerMap[b])||trackerMap[b][c]==1;trackerMap[b][c]=0;a&&bridge.extension.sendRequest({message:"allowTracker",host:b,name:c},
function(){})};function toggleTrackerHandler(a){var c=a.name,b=a.host,d=a.blocked?1:0;trackerMap[b]||(trackerMap[b]={});var e=!0;c in trackerMap[b]&&trackerMap[b][c]==d&&(e=!1);trackerMap[b][c]=d;!a.blocked&&e&&DNTP.Events.hasListener(c+" Blocked")&&SocialButtons.commonClickHandlerFromPopup(window.document,b,c,b)}
function hideBlockedNodes(){var a={},c=0,b;for(b in urlAlreadyBlocked)if(urlAlreadyBlocked[b].type=="sub_frame")a[b]=urlAlreadyBlocked[b].rule,c++;if(c>0)for(var c=window.document.getElementsByTagName("iframe"),d=0;d<c.length;d++)if(b=c[d].getAttribute("src")){b[0]=="/"&&(b=window.location.protocol+b);var e=b.indexOf("#");e!=-1&&(b=b.substr(0,e));b in a&&(urlBlocked(c[d],a[b]),delete a[b],delete urlAlreadyBlocked[b])}}document.addEventListener("load",hideBlockedNodes,!1);
document.addEventListener("load",function(){bridge.extension.sendRequest({message:"computeBadgeAndNotifications"},function(){})},!1);window.addEventListener("load",function(){window.top==window&&bridge.extension.sendRequest({message:"PageLoadDone",referrer:window.document.referrer,title:window.document.title},function(){})},!1);window.addEventListener("beforeunload",function(){window.top==window&&bridge.extension.sendRequest({message:"PageUnload"},function(){})},!1);
window.addEventListener("error",function(a){a&&bridge.extension.sendRequest({message:"recordError",errorMsg:a.message||"Unknown error"},function(){})},!1);